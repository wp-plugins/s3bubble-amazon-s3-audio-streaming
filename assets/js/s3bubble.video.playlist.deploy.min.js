!function(i){i.fn.videoPlaylist=function(e,a){e=i.extend({url:window.location.href},e);var s='<div id="s3bubble-media-main-container-'+e.Pid+'" class="s3bubble-media-main-video"><div class="s3bubble-media-main-video-playlist-wrap"><div id="jquery_jplayer_'+e.Pid+'" class="s3bubble-media-main-jplayer"></div><div class="s3bubble-media-main-video-skip"><h2>Skip Ad</h2><i class="s3icon s3icon-step-forward"></i></div><div class="s3bubble-media-main-video-search"><input type="text" id="s3bubble-video-playlist-tsearch-'+e.Pid+'" class="s3bubble-video-playlist-tsearch" name="s3bubble-video-playlist-tsearch" placeholder="Search"></div><div class="s3bubble-media-main-video-loading"><i class="s3icon s3icon-circle-o-notch s3icon-spin"></i></div><div class="s3bubble-media-main-video-play"><i class="s3icon s3icon-play"></i></div><div class="s3bubble-media-main-gui" style="visibility: hidden;"><div class="s3bubble-media-main-interface"><div class="s3bubble-media-main-controls-holder"><div class="s3bubble-media-main-left-controls"><a href="javascript:;" class="s3bubble-media-main-play" tabindex="1"><i class="s3icon s3icon-play"></i></a><a href="javascript:;" class="s3bubble-media-main-pause" tabindex="1"><i class="s3icon s3icon-pause"></i></a></div><div class="s3bubble-media-main-progress" dir="auto"><div class="s3bubble-media-main-seek-bar" dir="auto"><div class="s3bubble-media-main-play-bar" dir="auto"></div></div></div><div class="s3bubble-media-main-right-controls"><a href="javascript:;" class="s3bubble-media-main-full-screen" tabindex="3" title="full screen"><i class="s3icon s3icon-arrows-alt"></i></a><a href="javascript:;" class="s3bubble-media-main-restore-screen" tabindex="3" title="restore screen"><i class="s3icon s3icon-arrows-alt"></i></a><a href="javascript:;" class="s3bubble-media-main-playlist-list" tabindex="3" title="Playlist List"><i class="s3icon s3icon-list-ul"></i></a><a href="javascript:;" class="s3bubble-media-main-playlist-search" tabindex="3" title="Search List"><i class="s3icon s3icon-search"></i></a><div class="s3bubble-media-main-volume-bar" dir="auto"><div class="s3bubble-media-main-volume-bar-value" dir="auto"></div></div><a href="javascript:;" class="s3bubble-media-main-mute" tabindex="2" title="mute"><i class="s3icon s3icon-volume-up"></i></a><a href="javascript:;" class="s3bubble-media-main-unmute" tabindex="2" title="unmute"><i class="s3icon s3icon-volume-off"></i></a><div class="s3bubble-media-main-time-container"><div class="s3bubble-media-main-duration"></div></div></div></div></div></div></div><div class="s3bubble-media-main-playlist" style="'+e.Playlist+'"><ul class="s3bubble-video-playlist-ul-'+e.Pid+'"><li></li></ul></div><div class="s3bubble-media-main-no-solution" style="display:none;"><span>Update Required</span>Flash player is needed to use this player please download here. <a href="https://get2.adobe.com/flashplayer/" target="_blank">Download</a></div></div>';this.html(s);var n=-1,l=e.Aspect,l=l.split(":"),b=i("#s3bubble-media-main-container-"+e.Pid).width()/l[0]*l[1],d=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(d=!0),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-playlist-wrap").height(b);var t=new jPlayerPlaylist({jPlayer:"#jquery_jplayer_"+e.Pid,cssSelectorAncestor:"#s3bubble-media-main-container-"+e.Pid},t,{playlistOptions:{autoPlay:e.AutoPlay,downloadSet:e.Download},ready:function(a){var s={action:"s3bubble_video_playlist_internal_ajax",security:e.Security,Timezone:"America/New_York",Bucket:e.Bucket,Folder:e.Folder};i.post(e.Ajax,s,function(a){a.error?(i("#s3bubble-media-main-container-"+e.Pid).append('<span class="s3bubble-alert"><p>'+a.message+".</p></span>"),console.log(a.message)):(t.setPlaylist(a),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 320px 0 40px"),d&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 160px 0 40px"),("s2member_level1"===a.user||"s2member_level2"===a.user)&&(i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 360px 0 40px"),d&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 200px 0 40px"),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-right-controls").prepend('<a href="https://s3bubble.com/?brand=plugin" class="s3bubble-media-main-logo"><i id="icon-S3" class="icon-S3"></i></a>')),i("video").bind("contextmenu",function(i){return!1}),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist-list").click(function(){return i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist").slideToggle(),!1}),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist-search").click(function(){return t.pause(),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-play").fadeOut(),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-search").fadeIn(),!1}),i("#s3bubble-video-playlist-tsearch-"+e.Pid).keyup(function(){var a=i(this).val(),s=i("#s3bubble-media-main-container-"+e.Pid+" ul.s3bubble-video-playlist-ul-"+e.Pid+" > li"),n=s.filter(function(e,s){return-1!==i(s).text().toLowerCase().indexOf(a.toLowerCase())});s.hide(),n.show()}),setTimeout(function(){""!==e.Height&&i(".s3bubble-video-playlist-ul-"+e.Pid).css({height:e.Height+"px","overflow-y":"scroll"}),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut(),i(".s3bubble-media-main-gui").css("visibility","visible")},2e3))},"json")},timeupdate:function(a){a.jPlayer.status.currentTime>1&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut()},resize:function(i){},click:function(i){i.jPlayer.status.paused?t.play():t.pause()},error:function(i){console.log(i.jPlayer.error),console.log(i.jPlayer.error.type)},loadedmetadata:function(a){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut()},loadeddata:function(a){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut()},emptied:function(a){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeIn()},ended:function(a){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeIn()},stalled:function(a){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeIn()},waiting:function(){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeIn()},canplay:function(){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut()},pause:function(){},playing:function(){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut(),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-search").fadeOut(),i("#s3bubble-video-playlist-tsearch-"+e.Pid).removeAttr("value"),i("#s3bubble-media-main-container-"+e.Pid+" ul.s3bubble-video-playlist-ul-"+e.Pid+" > li").show()},play:function(){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-search").fadeOut(),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut();var a=t.current,s=t.playlist[a];d===!1&&s.advert&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-skip").animate({left:"0"},50,function(){}),n!==a&&s.advert!==!0&&(addListener({app_id:s3bubble_all_object.s3appid,server:s3bubble_all_object.serveraddress,bucket:e.Bucket,key:s.key,type:"video",advert:!1}),n=a)},suspend:function(){},stalled:function(){},loadstart:function(){},keyBindings:{play:{key:32,fn:function(i){i.status.paused?i.play():i.pause()}},fullScreen:{key:70,fn:function(i){(i.status.video||i.options.audioFullScreen)&&i._setOption("fullScreen",!i.options.fullScreen)}},muted:{key:77,fn:function(i){i._muted(!i.options.muted)}},volumeUp:{key:190,fn:function(i){i.volume(i.options.volume+.1)}},volumeDown:{key:188,fn:function(i){i.volume(i.options.volume-.1)}},loop:{key:76,fn:function(i){i._loop(!i.options.loop)}}},swfPath:"https://s3.amazonaws.com/s3bubble.assets/flash/latest.jplayer.swf",supplied:"m4v",wmode:"window",useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!1,keyEnabled:!0,remainingDuration:!0,size:{width:"100%",height:b},autohide:{full:!0,restored:!0,hold:3e3}});return this.click(function(i){i.preventDefault()})}}(jQuery);