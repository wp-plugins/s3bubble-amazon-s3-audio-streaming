!function(e){e.fn.singleVideo=function(i,a){i=e.extend({url:window.location.href},i);var n='<div id="s3bubble-media-main-container-'+i.Pid+'" class="s3bubble-media-main-video"><div id="jquery_jplayer_'+i.Pid+'" class="s3bubble-media-main-jplayer"></div><div class="s3bubble-media-main-video-skip"><h2>Skip Ad</h2><i class="s3icon s3icon-step-forward"></i></div><div class="s3bubble-media-main-video-loading"><i class="s3icon s3icon-circle-o-notch s3icon-spin"></i></div><div class="s3bubble-media-main-video-play"><i class="s3icon s3icon-play"></i></div><div class="s3bubble-media-main-gui" style="visibility: hidden;"><div class="s3bubble-media-main-interface"><div class="s3bubble-media-main-controls-holder"><div class="s3bubble-media-main-left-controls"><a href="javascript:;" class="s3bubble-media-main-play" tabindex="1"><i class="s3icon s3icon-play"></i></a><a href="javascript:;" class="s3bubble-media-main-pause" tabindex="1"><i class="s3icon s3icon-pause"></i></a></div><div class="s3bubble-media-main-progress" dir="auto"><div class="s3bubble-media-main-seek-bar" dir="auto"><div class="s3bubble-media-main-play-bar" dir="auto"></div></div></div><div class="s3bubble-media-main-right-controls"><a href="javascript:;" class="s3bubble-media-main-full-screen" tabindex="3" title="full screen"><i class="s3icon s3icon-arrows-alt"></i></a><a href="javascript:;" class="s3bubble-media-main-restore-screen" tabindex="3" title="restore screen"><i class="s3icon s3icon-arrows-alt"></i></a><div class="s3bubble-media-main-volume-bar" dir="auto"><div class="s3bubble-media-main-volume-bar-value" dir="auto"></div></div><a href="javascript:;" class="s3bubble-media-main-mute" tabindex="2" title="mute"><i class="s3icon s3icon-volume-up"></i></a><a href="javascript:;" class="s3bubble-media-main-unmute" tabindex="2" title="unmute"><i class="s3icon s3icon-volume-off"></i></a><div class="s3bubble-media-main-time-container"><div class="s3bubble-media-main-duration"></div></div></div></div></div></div><div class="s3bubble-media-main-playlist" style="display:none !important;"><ul><li></li></ul></div><div class="s3bubble-media-main-no-solution" style="display:none;"><span>Update Required</span>Flash player is needed to use this player please download here. <a href="https://get2.adobe.com/flashplayer/" target="_blank">Download</a></div></div>';this.html(n);var s=-1,l=i.Aspect,l=l.split(":"),d=e("#s3bubble-media-main-container-"+i.Pid).width()/l[0]*l[1],b=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(b=!0);var o=new jPlayerPlaylist({jPlayer:"#jquery_jplayer_"+i.Pid,cssSelectorAncestor:"#s3bubble-media-main-container-"+i.Pid},o,{playlistOptions:{autoPlay:i.AutoPlay,downloadSet:i.Download},ready:function(a){var n={action:"s3bubble_video_single_internal_ajax",security:i.Security,Timezone:"America/New_York",Bucket:i.Bucket,Key:i.Key,Cloudfront:i.Cloudfront,Server:s3bubble_all_object.serveraddress};e.post(i.Ajax,n,function(a){a.error?(e("#s3bubble-media-main-container-"+i.Pid).append('<span class="s3bubble-alert"><p>'+a.message+".</p></span>"),console.log(a.message)):(o.setPlaylist(a.results),e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-progress").css("margin","12px 240px 0 40px"),b&&e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-progress").css("margin","12px 60px 0 40px"),("s2member_level1"===a.user||"s2member_level2"===a.user)&&(e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-progress").css("margin","12px 280px 0 40px"),b&&e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-progress").css("margin","12px 100px 0 40px"),e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-right-controls").prepend('<a href="https://s3bubble.com/?brand=plugin" class="s3bubble-media-main-logo"><i id="icon-S3" class="icon-S3"></i></a>')),i.Download&&(i.Twitter?(e("#s3bubble-media-main-container-"+i.Pid).prepend('<a href="#" class="s3bubble-cloud-download" title="Free Download"><i class="s3icon s3icon-cloud-download"></i></a>'),e(".s3bubble-cloud-download").tweetAction({text:i.TwitterText,url:window.href,via:i.TwitterHandler,related:i.TwitterHandler},function(){window.open(a.results[0].download)})):e("#s3bubble-media-main-container-"+i.Pid).prepend('<a href="'+a.results[0].download+'" class="s3bubble-cloud-download" title="Free Download"><i class="s3icon s3icon-cloud-download"></i></a>')),e("video").bind("contextmenu",function(e){return!1}),e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-skip").on("click",function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeIn(),e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-skip").animate({left:"-120"},50,function(){o.next()})}),setTimeout(function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut(),e(".s3bubble-media-main-gui").css("visibility","visible")},2e3),i.Start&&e("#jquery_jplayer_"+i.Pid).jPlayer("playHead",i.Start))},"json")},timeupdate:function(a){if(i.Finish){var n=a.jPlayer.status.currentPercentAbsolute;Math.round(n)>i.Finish&&(e("#jquery_jplayer_"+i.Pid).jPlayer("stop"),e("#jquery_jplayer_"+i.Pid).jPlayer("playHead",i.Start))}a.jPlayer.status.currentTime>1&&e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut()},resize:function(e){},click:function(e){e.jPlayer.status.paused?o.play():o.pause()},error:function(e){console.log(e.jPlayer.error),console.log(e.jPlayer.error.type)},loadedmetadata:function(a){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut()},loadeddata:function(a){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut()},emptied:function(a){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeIn()},ended:function(a){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeIn();var n=o.current,s=o.playlist[n];s.advert&&b===!1?e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-skip").animate({left:"0"},50,function(){}):e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-skip").animate({left:"-120"},50,function(){})},stalled:function(a){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeIn()},waiting:function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeIn()},canplay:function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut()},pause:function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-cloud-download").fadeIn()},playing:function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut()},play:function(){e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-cloud-download").fadeOut(),e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-loading").fadeOut();var a=o.current,n=o.playlist[a];n.advert&&b===!1&&e("#s3bubble-media-main-container-"+i.Pid+" .s3bubble-media-main-video-skip").animate({left:"0"},50,function(){}),s!==a&&n.advert!==!0&&(addListener({app_id:s3bubble_all_object.s3appid,server:s3bubble_all_object.serveraddress,bucket:i.Bucket,key:n.key,type:"video",advert:!1}),s=a)},suspend:function(){},keyBindings:{play:{key:32,fn:function(e){e.status.paused?e.play():e.pause()}},fullScreen:{key:70,fn:function(e){(e.status.video||e.options.audioFullScreen)&&e._setOption("fullScreen",!e.options.fullScreen)}},muted:{key:77,fn:function(e){e._muted(!e.options.muted)}},volumeUp:{key:190,fn:function(e){e.volume(e.options.volume+.1)}},volumeDown:{key:188,fn:function(e){e.volume(e.options.volume-.1)}},loop:{key:76,fn:function(e){e._loop(!e.options.loop)}},speedUp:{key:83,fn:function(e){e.playbackRate(e.status.playbackRate+.1)}},slowDown:{key:65,fn:function(e){e.playbackRate(e.status.playbackRate-.1)}},normalSpeed:{key:68,fn:function(e){e.playbackRate(1)}}},swfPath:"https://s3.amazonaws.com/s3bubble.assets/flash/latest.jplayer.swf",supplied:"m4v",useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!1,keyEnabled:!0,remainingDuration:!0,size:{width:"100%",height:d},autohide:{full:!0,restored:!0,hold:3e3}});return this.click(function(e){e.preventDefault()})}}(jQuery);