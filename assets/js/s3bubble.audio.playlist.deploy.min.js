!function(i){i.fn.audioPlaylist=function(e,a){e=i.extend({url:window.location.href},e);var s='<div id="s3bubble-media-main-container-'+e.Pid+'" class="s3bubble-media-main-audio"><div class="s3bubble-media-main-video-playlist-wrap"><div id="jquery_jplayer_'+e.Pid+'" class="s3bubble-media-main-jplayer"></div><div class="s3bubble-media-main-gui"><div class="s3bubble-media-main-interface s3bubble-media-main-interface-audio-playlist"><div class="s3bubble-media-main-audio-loading"><i class="s3icon s3icon-circle-o-notch s3icon-spin"></i></div><div class="s3bubble-media-main-controls-holder" style="display:none;"><div class="s3bubble-media-main-left-controls"><a href="javascript:;" class="s3bubble-media-main-play" tabindex="1"><i class="s3icon s3icon-play"></i></a><a href="javascript:;" class="s3bubble-media-main-pause" tabindex="1"><i class="s3icon s3icon-pause"></i></a></div><div class="s3bubble-media-main-progress" dir="auto"><div class="s3bubble-media-main-seek-bar" dir="auto"><div class="s3bubble-media-main-play-bar" dir="auto"></div></div></div><div class="s3bubble-media-main-right-controls"><a href="javascript:;" class="s3bubble-media-main-playlist-list" tabindex="3" title="Playlist List"><i class="s3icon s3icon-list-ul"></i></a><a href="javascript:;" class="s3bubble-media-main-playlist-search" tabindex="3" title="Search List"><i class="s3icon s3icon-search"></i></a><div class="s3bubble-media-main-volume-bar" dir="auto"><div class="s3bubble-media-main-volume-bar-value" dir="auto"></div></div><a href="javascript:;" class="s3bubble-media-main-mute" tabindex="2" title="mute"><i class="s3icon s3icon-volume-up"></i></a><a href="javascript:;" class="s3bubble-media-main-unmute" tabindex="2" title="unmute"><i class="s3icon s3icon-volume-off"></i></a><div class="s3bubble-media-main-time-container"><div class="s3bubble-media-main-duration"></div></div></div></div></div></div></div><div class="s3search s3audible-search-'+e.Pid+'" style="display:none;"><input type="text" id="s3bubble-audio-playlist-tsearch-'+e.Pid+'" class="s3bubble-audio-playlist-tsearch" name="s3bubble-audio-playlist-tsearch" placeholder="Search"></div><div class="s3bubble-media-main-playlist s3bubble-audio-playlist-tracksearch-'+e.Pid+'" style="display:'+e.Playlist+';"><ul class="s3bubble-audio-playlist-ul-'+e.Pid+'"><li>&nbsp;</li></ul></div><div class="s3bubble-media-main-no-solution" style="display:none;"><span>Update Required</span>Flash player is needed to use this player please download here. <a href="https://get2.adobe.com/flashplayer/" target="_blank">Download</a></div></div>';this.html(s);var n=-1,l=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(l=!0);var t=new jPlayerPlaylist({jPlayer:"#jquery_jplayer_"+e.Pid,cssSelectorAncestor:"#s3bubble-media-main-container-"+e.Pid},t,{playlistOptions:{autoPlay:e.AutoPlay,downloadSet:e.Download,displayTime:0,playerWidth:i(this).width(),enableRemoveControls:!1},ready:function(a){var s={action:"s3bubble_audio_playlist_internal_ajax",security:e.Security,Timezone:"America/New_York",Bucket:e.Bucket,Folder:e.Folder};i.post(e.Ajax,s,function(a){i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-audio-loading").fadeOut(),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-controls-holder").fadeIn(),a.error?(i("#s3bubble-media-main-container-"+e.Pid).append('<span class="s3bubble-alert"><p>'+a.message+".</p></span>"),console.log(a.message)):(t.setPlaylist(a),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 280px 0 40px"),l&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 150px 0 40px"),("s2member_level1"===a.user||"s2member_level2"===a.user)&&(i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 320px 0 40px"),l&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-progress").css("margin","12px 190px 0 40px"),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-right-controls").prepend("<a href='https://s3bubble.com/?brand=plugin' class='s3bubble-media-main-logo'><i id='icon-S3' class='icon-S3'></i></a>")),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist-list").click(function(){return i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist").slideToggle(),!1}),""!==e.Height&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist").css({height:e.Height+"px","overflow-y":"scroll"}),i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-playlist-search").click(function(){return i("#s3bubble-media-main-container-"+e.Pid+" .s3audible-search-"+e.Pid).hasClass("searchOpen")?i("#s3bubble-media-main-container-"+e.Pid+" .s3audible-search-"+e.Pid).fadeOut().removeClass("searchOpen"):i("#s3bubble-media-main-container-"+e.Pid+" .s3audible-search-"+e.Pid).fadeIn().addClass("searchOpen"),!1}),i("#s3bubble-media-main-container-"+e.Pid+" #s3bubble-audio-playlist-tsearch-"+e.Pid).keyup(function(){var a=i(this).val(),s=i("#s3bubble-media-main-container-"+e.Pid+" ul.s3bubble-audio-playlist-ul-"+e.Pid+" > li"),n=s.filter(function(e,s){return-1!==i(s).text().toLowerCase().indexOf(a.toLowerCase())});s.hide(),n.show()}))},"json")},timeupdate:function(a){a.jPlayer.status.currentTime>1&&i("#s3bubble-media-main-container-"+e.Pid+" .s3bubble-media-main-video-loading").fadeOut()},resize:function(i){},click:function(i){},error:function(i){console.log(i.jPlayer.error),console.log(i.jPlayer.error.type)},loadedmetadata:function(){},waiting:function(){},canplay:function(){},pause:function(){},playing:function(){},play:function(){var i=t.current,a=t.playlist[i];n!==i&&(addListener({app_id:s3bubble_all_object.s3appid,server:s3bubble_all_object.serveraddress,bucket:e.Bucket,key:a.key,type:"audio",advert:!1}),n=i)},suspend:function(){},stalled:function(){},loadstart:function(){},keyBindings:{play:{key:32,fn:function(i){i.status.paused?i.play():i.pause()}},muted:{key:77,fn:function(i){i._muted(!i.options.muted)}},volumeUp:{key:190,fn:function(i){i.volume(i.options.volume+.1)}},volumeDown:{key:188,fn:function(i){i.volume(i.options.volume-.1)}},loop:{key:76,fn:function(i){i._loop(!i.options.loop)}},goForwardFive:{key:72,fn:function(i){i.playHead(i.status.currentPercentAbsolute+5)}},goBackFive:{key:66,fn:function(i){i.playHead(i.status.currentPercentAbsolute-5)}},loopOn:{key:49,fn:function(i){i.options.lon=i.status.currentPercentAbsolute}},loopOff:{key:50,fn:function(i){i.options.loff=i.status.currentPercentAbsolute}},loopfinish:{key:51,fn:function(i){i.options.lfinish?i.options.lfinish=!1:i.options.lfinish=!0}},speedUp:{key:83,fn:function(i){i.playbackRate(i.status.playbackRate+.1)}},slowDown:{key:65,fn:function(i){i.playbackRate(i.status.playbackRate-.1)}},normalSpeed:{key:68,fn:function(i){i.playbackRate(1)}}},swfPath:"https://s3.amazonaws.com/s3bubble.assets/flash/latest.jplayer.swf",preload:e.Preload,supplied:"mp3,m4a",wmode:"window",useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!1,keyEnabled:!0,audioFullScreen:!0,remainingDuration:!0});return this.click(function(i){i.preventDefault()})}}(jQuery);